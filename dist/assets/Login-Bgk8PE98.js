import{r as g,f as x,j as s,c as j,D as F,u as H,a0 as R,G as v,N as D,J as B,a1 as I,K as P,a2 as T,a3 as $,a4 as U,y as q}from"./index-BzLzT3j-.js";import{z as h,u as z,t as O,I as w}from"./index-CVCHQwwo.js";import{H as _}from"./Heading-CLU1H8lp.js";import{R as G,C as J}from"./Row-C34yTrzI.js";import{u as K}from"./hook-cU7AGBPQ.js";import{A as V}from"./Anchor-DirUqQ4O.js";import{F as W,S as Y}from"./Spinner-brn0HqLf.js";const N=F("h4");N.displayName="DivStyledAsH4";const S=g.forwardRef(({className:a,bsPrefix:e,as:t=N,...r},n)=>(e=x(e,"alert-heading"),s.jsx(t,{ref:n,className:j(a,e),...r})));S.displayName="AlertHeading";const C=g.forwardRef(({className:a,bsPrefix:e,as:t=V,...r},n)=>(e=x(e,"alert-link"),s.jsx(t,{ref:n,className:j(a,e),...r})));C.displayName="AlertLink";const L=g.forwardRef((a,e)=>{const{bsPrefix:t,show:r=!0,closeLabel:n="Close alert",closeVariant:l,className:m,children:d,variant:o="primary",onClose:i,dismissible:u,transition:c=v,...b}=K(a,{show:"onClose"}),p=x(t,"alert"),k=H(E=>{i&&i(!1,E)}),f=c===!0?v:c,A=s.jsxs("div",{role:"alert",...f?void 0:b,ref:e,className:j(m,p,o&&`${p}-${o}`,u&&`${p}-dismissible`),children:[u&&s.jsx(R,{onClick:k,"aria-label":n,variant:l}),d]});return f?s.jsx(f,{unmountOnExit:!0,...b,ref:void 0,in:r,children:A}):r?A:null});L.displayName="Alert";const y=Object.assign(L,{Link:C,Heading:S}),M=h.object({email:h.string().min(1,{message:"email is required"}).email(),password:h.string().min(8,{message:"Password must be at least 8 characters longs"})}),Q=()=>{const a=D(),e=B(),[t,r]=I(),{error:n,loading:l,accessToken:m}=P(c=>c.auth),{register:d,handleSubmit:o,formState:{errors:i}}=z({mode:"onBlur",resolver:O(M)}),u=c=>{t.get("message")&&r(""),a($(c)).unwrap().then(()=>e("/"))};return g.useEffect(()=>()=>{a(T())},[a]),{error:n,loading:l,accessToken:m,formErrors:i,searchParams:t,register:d,handleSubmit:o,submitForm:u}},ns=()=>{var o,i;const{error:a,loading:e,accessToken:t,formErrors:r,searchParams:n,register:l,handleSubmit:m,submitForm:d}=Q();return t?s.jsx(U,{to:"/"}):s.jsxs(s.Fragment,{children:[s.jsx(_,{title:"User Login"}),s.jsx(G,{children:s.jsxs(J,{md:{span:6,offset:3},children:[n.get("message")==="account_created"&&s.jsx(y,{variant:"success",children:"Your account successfully created , please login"}),n.get("message")==="login_required"&&s.jsx(y,{variant:"danger",children:"Login to continue"}),s.jsxs(W,{onSubmit:m(d),children:[s.jsx(w,{name:"email",label:"Email Address",register:l,error:(o=r.email)==null?void 0:o.message}),s.jsx(w,{type:"password",name:"password",label:"Password",register:l,error:(i=r.password)==null?void 0:i.message}),s.jsx(q,{variant:"info",type:"submit",style:{color:"white"},children:e==="pending"?s.jsxs(s.Fragment,{children:[s.jsx(Y,{animation:"border",size:"sm"})," Loading..."]}):"Submit"}),a&&s.jsx("p",{style:{color:"#DC3545",marginTop:"10px"},children:a})]})]})})]})};export{ns as default};
