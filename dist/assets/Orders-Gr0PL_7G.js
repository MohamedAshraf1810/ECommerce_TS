import{r as j,f as b,c as $,j as e,N as g,K as y,aj as P,ag as O,a9 as x}from"./index-BzLzT3j-.js";import{a as w,L as T}from"./CartItem-CkOC8e2T.js";import{H}from"./Heading-CLU1H8lp.js";import"./Row-C34yTrzI.js";import"./Spinner-brn0HqLf.js";const L=j.forwardRef(({bsPrefix:r,className:l,striped:d,bordered:i,borderless:h,hover:a,size:c,variant:s,responsive:u,...p},o)=>{const t=b(r,"table"),m=$(l,t,s&&`${t}-${s}`,c&&`${t}-${c}`,d&&`${t}-${typeof d=="string"?`striped-${d}`:"striped"}`,i&&`${t}-bordered`,h&&`${t}-borderless`,a&&`${t}-hover`),n=e.jsx("table",{...p,className:m,ref:o});if(u){let f=`${t}-responsive`;return typeof u=="string"&&(f=`${f}-${u}`),e.jsx("div",{className:f,children:n})}return n}),M=()=>{const r=g(),{loading:l,error:d,orderList:i}=y(o=>o.orders),[h,a]=j.useState(!1),[c,s]=j.useState([]),u=()=>{a(!1),s([])},p=o=>{const t=i.find(n=>n.id===o),m=(t==null?void 0:t.items)??[];a(!0),s(n=>[...n,...m])};return j.useEffect(()=>{const o=r(P());return()=>{o.abort(),r(O())}},[r]),{loading:l,error:d,orderList:i,showModal:h,selectedProduct:c,closeModalHandler:u,viewOrderDetails:p}},E=()=>{const{loading:r,error:l,orderList:d,showModal:i,selectedProduct:h,closeModalHandler:a,viewOrderDetails:c}=M();return e.jsxs(e.Fragment,{children:[e.jsxs(x,{show:i,onHide:a,children:[e.jsx(x.Header,{closeButton:!0,children:e.jsx(x.Title,{children:"Products Details"})}),e.jsx(x.Body,{children:h.map(s=>e.jsx(w,{title:s.title,img:s.img,price:s.price,quantity:s.quantity,direction:"column",style:{marginTop:"10px"}},s.id))})]}),e.jsx(H,{title:"Your Orders"}),e.jsx(T,{status:r,error:l,type:"Table",children:e.jsxs(L,{striped:!0,bordered:!0,hover:!0,style:{tableLayout:"fixed"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Order Number"}),e.jsx("th",{children:"Item"}),e.jsx("th",{children:"QTY"}),e.jsx("th",{children:"Total Price"})]})}),e.jsx("tbody",{children:d.map(s=>e.jsxs("tr",{children:[e.jsxs("td",{children:["#",s.id]}),e.jsx("td",{children:e.jsx("span",{onClick:()=>c(s.id),style:{textDecoration:"underline",cursor:"pointer"},children:"Product details"})}),e.jsx("td",{children:s.items.length}),e.jsxs("td",{children:[s.subTotal.toFixed(2)," EGP"]})]},s.id))})]})})]})};export{E as default};
